<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.korit.trip_planner_back.mapper.ItineraryDayMapper">
    <insert id="insert" useGeneratedKeys="true" keyProperty="dayId">
        INSERT INTO itinerary_days
        VALUES
        (default, #{itineraryId}, #{dayNumber}, #{date}, #{startTime}, #{endTime}, #{aiComment})
    </insert>
    <select id="findByItineraryId" resultType="ItineraryDay">
        SELECT
            day_id,
            itinerary_id,
            day_number,
            date,
            start_time,
            end_time,
            ai_comment
            FROM itinerary_days
        WHERE
            itinerary_id = #{itineraryId}
        ORDER BY
            day_number ASC
    </select>
    <select id="findByItineraryIdAndDay" resultType="ItineraryDay">
        SELECT * FROM itinerary_days
        WHERE itinerary_id = #{itineraryId} AND day_number = #{day}
    </select>
    <update id="update">
        UPDATE itinerary_days
        SET start_time = #{startTime},
            end_time = #{endTime},
            ai_comment = #{aiComment}
        WHERE day_id = #{dayId}
    </update>
</mapper>