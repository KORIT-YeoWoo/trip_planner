<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.korit.trip_planner_back.mapper.ItineraryMapper">

    <!-- ✅ 수정: total_cost → totalCost -->
    <insert id="insert" useGeneratedKeys="true" keyProperty="itineraryId">
        INSERT INTO itineraries
        (user_id, start_date, end_date, budget, transport, party_type, total_cost, created_at)
        VALUES
        (#{userId}, #{startDate}, #{endDate}, #{budget}, #{transport}, #{partyType}, #{totalCost}, NOW())
    </insert>

    <select id="findByItineraryId" resultType="itinerary">
        SELECT
            itinerary_id AS itineraryId,
            user_id AS userId,
            start_date AS startDate,
            end_date AS endDate,
            budget,
            transport,
            party_type AS partyType,
            total_cost AS totalCost,
            created_at AS createdAt
        FROM
            itineraries
        WHERE
            itinerary_id = #{itineraryId}
    </select>

    <select id="findAll" resultType="itinerary">
        SELECT
            itinerary_id AS itineraryId,
            user_id AS userId,
            start_date AS startDate,
            end_date AS endDate,
            budget,
            transport,
            party_type AS partyType,
            total_cost AS totalCost,
            created_at AS createdAt
        FROM
            itineraries
    </select>

    <update id="update">
        UPDATE itineraries
        SET
            start_date = #{startDate},
            end_date = #{endDate},
            budget = #{budget},
            transport = #{transport},
            party_type = #{partyType},
            total_cost = #{totalCost}
        WHERE
            itinerary_id = #{itineraryId}
    </update>

    <delete id="deleteById">
        DELETE FROM itineraries
        WHERE itinerary_id = #{itineraryId}
    </delete>

</mapper>